<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8" />
<title>Status Serverů</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; text-align: center; padding: 2rem;}
  .online { color: #a8e63a; }
  .offline { color: #ff5555; }
</style>
</head>
<body>

<h1>Status serverů</h1>
<p>MC Server: <span id="mc-status">Načítám...</span></p>
<p>Dynmapa: <span id="map-status">Načítám...</span></p>

<script>
  const mcStatusEl = document.getElementById('mc-status');
  const mapStatusEl = document.getElementById('map-status');

  // Kontrola Dynmapy načtením JSON přes Image
  function checkDynmap() {
    return new Promise(resolve => {
      const img = new Image();
      img.src = 'http://map.3zscraft.cz:26636/tiles/_markers_/marker_world.json?cache=' + Date.now();
      img.onload = () => {
        mapStatusEl.textContent = 'Online';
        mapStatusEl.className = 'online';
        resolve(true);
      };
      img.onerror = () => {
        mapStatusEl.textContent = 'Offline';
        mapStatusEl.className = 'offline';
        resolve(false);
      };
    });
  }

  // Kontrola MC serveru přes fetch (pouze pokud má HTTP endpoint)
  async function checkMC() {
    try {
      const res = await fetch('https://mc.3zscraft.cz', { method: 'HEAD', cache: 'no-cache' });
      if (res.ok) {
        mcStatusEl.textContent = 'Online';
        mcStatusEl.className = 'online';
      } else {
        throw new Error('Server neodpovídá');
      }
    } catch {
      mcStatusEl.textContent = 'Offline';
      mcStatusEl.className = 'offline';
    }
  }

  // Spustíme obě kontroly
  checkMC();
  checkDynmap();
</script>

</body>
</html>
